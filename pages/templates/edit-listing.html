<!DOCTYPE html>
<html lang="en">
<head>
  {{ include('partials/header.html') }}
</head>

<body class="sidebar-pinned ">

  {{ include('partials/sidebar.html') }}

  <main class="admin-main">
    <!--site header begins-->

    {{ include('partials/nav.html') }}
    <!--site header ends -->
    <section class="admin-content">

      <div class="bg-darker">
          <div class="container  m-b-30">
              <div class="row p-b-40">
                  <div class="col-12 p-t-40 p-b-40">

                      <h1>Edit Listing</h1>

                  </div>
              </div>
          </div>
      </div>

      <div class="container pull-up">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="card m-b-30">
                {% for listing in myListings %}

                <div class="progress">
                  <div class="progress-bar" id="progress_bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                  </div>
                </div>

                <div class="card-body">
                  <div class="input-group mb-2">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroupFileAddon01">Max 100MB</span>
                    </div>

                    <div class="custom-file">
                      <button id="upload_widget" class="custom-file-input" id="inputGroupFile01">Upload files</button>
                      <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
                      {{ cloudinaryUpload|raw }}
                    </div>
                  </div>

                  <div class="row mb-5">
                    <div class="col-md-6">
                      <div class="embed-responsive embed-responsive-21by9">
                        <iframe class="embed-responsive-item" src="{{ listing.videoUrl }}" allow="encrypted-media" allowfullscreen></iframe>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="preview"></div>
                    </div>
                  </div>

                  <form class="" action="#" method="post">
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="title">Title</label>
                        <input type="text" name="title" class="form-control" value="{{ listing.title }}">
                      </div>

                      <div class="form-group col-md-6">
                        <label for="price">Price (Number only no price symbol $)</label>
                        <input type="text" name="price" class="form-control" value="{{ listing.price }}">
                      </div>
                    </div>

                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="suburb">Suburb</label>
                        <input type="text" name="suburb" class="form-control" value="{{ listing.suburb }}">
                      </div>

                      <div class="form-group col-md-6">
                        <label for="state">State</label>
                        <input type="text" name="state" class="form-control" value="{{ listing.state }}">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="description">Description</label>
                      <div id="editor" class="editor" style="height: 200px;">
                        <p>{{ listing.description }}</p>
                      </div>
                    </div>

                    <div class="form-group">
                      <button type="button" name="button" class="btn btn-success" style="width: 100%;">Save</button>
                    </div>
                  </form>
                </div>

                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </section>

  </main>

  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/jquery-ui/jquery-ui.min.js"></script>
  <script src="assets/vendor/blockui/jquery.blockUI.js"></script>
  <script src="assets/vendor/sweetalert/sweetalert2.all.min.js"></script>

  <script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/vendor/select2/js/select2.full.min.js"></script>
  <script src="assets/vendor/jquery-scrollbar/jquery.scrollbar.min.js"></script>
  <script src="assets/vendor/listjs/listjs.min.js"></script>
  <script src="assets/vendor/moment/moment.min.js"></script>
  <script src="assets/vendor/daterangepicker/daterangepicker.js"></script>
  <script src="assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
  <script src="assets/vendor/bootstrap-notify/bootstrap-notify.min.js"></script>
  <script src="assets/js/atmos.min.js"></script>
  <!--page specific scripts for demo-->

  <!--Additional Page includes-->
  <script src="assets/vendor/apexchart/apexcharts.min.js"></script>
  <!-- Quill text editor -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

  <script type="text/javascript">
  var quill = new Quill('#editor', {
    theme: 'snow'
  });
  </script>

  <!-- Cloudinary upload js -->
  <script type="text/javascript" src="assets/js/jquery.ui.widget.js"></script>
  <script type="text/javascript" src="assets/js/jquery.iframe-transport.js"></script>
  <script type="text/javascript" src="assets/js/jquery.fileupload.js"></script>
  <script type="text/javascript" src="assets/js/jquery.cloudinary.js"></script>

  <script>
  $(function() {
    if($.fn.cloudinary_fileupload !== undefined) {
      $("input.cloudinary-fileupload[type=file]").cloudinary_fileupload();
    }
  });

  $.cloudinary.config({ cloud_name: 'videosales', api_key: '534325556641693' });
  $('.cloudinary-fileupload').bind('fileuploadprogress', function(e, data) {
    $('#result').empty();
    $('.current-image').hide();
    $('#gallery').addClass('gallery-border');
    $("#progress_bar").css('width', 0+'%');
    $("#preview").show();
    $('.progress').show();
    $('#progress_bar').css('width', Math.round((data.loaded * 100.0) / data.total) + '%');
  });

  $('.cloudinary-fileupload').bind('cloudinarydone', function(e, data) {
    $('.preview');
    $('.image_public_id').val(data.result.public_id);
    url = (data.result.secure_url);
    $('.preview').append('<div class="embed-responsive embed-responsive-21by9"><iframe class="embed-responsive-item" src="'+url+'" allow="encrypted-media" allowfullscreen></iframe></div>');
    return true;
  });
  </script>

</body>

</html>
